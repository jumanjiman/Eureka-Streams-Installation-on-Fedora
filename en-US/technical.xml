<chapter id="_technical_discussion">
<title>Technical Discussion</title>
<simpara>This section provides technical details about the packaging and deployment
of HP PSP components for ISE.</simpara>
<section id="_psp_software">
<title>PSP Software</title>
<simpara>To download the PSP software:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
Visit <ulink url="http://www.hp.com/servers/psp">http://www.hp.com/servers/psp</ulink>
</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>
Follow the link for <emphasis role="strong">Downloads</emphasis>
</simpara>
</listitem>
<listitem>
<simpara>
Choose RHEL 5 Server x86_64
</simpara>
</listitem>
</orderedlist>
</listitem>
<listitem>
<simpara>
The HP site delivers three parts
</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>
Download Part 1 (XML file) as <literal>psp.xml</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Download Part 2 (tarball) with name intact
</simpara>
</listitem>
<listitem>
<simpara>
Download Part 3 (MD5 checksum) and save as <literal>md5sum.txt</literal> in the <emphasis>same</emphasis> directory as tarball
</simpara>
</listitem>
</orderedlist>
</listitem>
<listitem>
<simpara>
Verify integrity of the download
</simpara>
<screen>md5sum -c md5sum.txt</screen>
<simpara>Expected output:</simpara>
<screen>psp-8.31.rhel5.x86_64.en.tar.gz: OK</screen>
<important><simpara>This is not a true integrity check since it
lacks a digital signature, but it is the best we can do at the moment.</simpara></important>
</listitem>
<listitem>
<simpara>
Extract the tarball to inspect its contents
</simpara>
<orderedlist numeration="loweralpha">
<listitem>
<simpara>
Extract the distribution tarball
</simpara>
<screen>[pmorgan@x200 hp-psp]$ tar xvzf psp-8.31.rhel5.x86_64.en.tar.gz
compaq/
compaq/csp/
compaq/csp/linux/
compaq/csp/linux/cpqacuxe-8.30-5.0.noarch.rpm.tar.gz
compaq/csp/linux/cpq_cciss-3.6.20-30.rhel5.x86_64.rpm.tar.gz
compaq/csp/linux/e1000-8.0.16-1.src.rpm.tar.gz
compaq/csp/linux/e1000e-1.0.15-1.src.rpm.tar.gz
compaq/csp/linux/fibreutils-2.5-4.x86_64.rpm.tar.gz
compaq/csp/linux/hpacucli-8.30-5.0.noarch.rpm.tar.gz
compaq/csp/linux/hpahcisr-1.2.1-9.rhel5.x86_64.rpm.tar.gz
compaq/csp/linux/hpdiags-8.3.0-14.linux.x86_64.rpm.tar.gz
compaq/csp/linux/hp-fc-enablement-1.1-9.noarch.rpm.tar.gz
compaq/csp/linux/hp-health-8.3.1.2-2.rhel5.x86_64.rpm.tar.gz
compaq/csp/linux/hp-ilo-8.3.0-118.rhel5.x86_64.rpm.tar.gz
compaq/csp/linux/hp-lpfc-8.2.0.22-8.noarch.rpm.tar.gz
compaq/csp/linux/hpmouse-1.1.2-33.noarch.rpm.tar.gz
compaq/csp/linux/hponcfg-2.2.0-5.noarch.rpm.tar.gz
compaq/csp/linux/hp-OpenIPMI-8.3.1-15.rhel5.x86_64.rpm.tar.gz
compaq/csp/linux/hp_qla2x00src-8.02.23-1.noarch.rpm.tar.gz
compaq/csp/linux/hp_qla2x00src-mezz-8.02.23-1.noarch.rpm.tar.gz
compaq/csp/linux/hpsmh-3.0.2-77.x86_64.rpm.tar.gz
compaq/csp/linux/hp-smh-templates-8.3.0.9-13.noarch.rpm.tar.gz
compaq/csp/linux/hp-snmp-agents-8.3.0.27-24.rhel5.x86_64.rpm.tar.gz
compaq/csp/linux/hpvca-2.2.1-3.linux.rpm.tar.gz
compaq/csp/linux/mptlinux-4.00.13.07-1.rhel5.x86_64.rpm.tar.gz
compaq/csp/linux/netxtreme2-5.0.17-1.src.rpm.tar.gz
compaq/csp/linux/nx_nic-4.0.406-5.src.rpm.tar.gz
compaq/csp/linux/qla4xxx-5.01.01.04-1.src.rpm.tar.gz
compaq/csp/linux/tg3-3.99h-1.src.rpm.tar.gz
compaq/csp/linux/hppldu-1.0.26-1.tar.gz
compaq/csp/linux/hppldu-librpms-1.0.26-1.tar.gz
compaq/csp/linux/install830.sh
compaq/csp/linux/bp000666.xml
compaq/csp/linux/hppldu_v831.rhel5.txt</screen>
</listitem>
<listitem>
<simpara>
Extract additional tarballs
</simpara>
<screen>find compaq/ -regex '.*tar.gz' -exec tar xvf {} \;</screen>
</listitem>
<listitem>
<simpara>
Some of the packages appear from the name to conflict, so check the packager for each:
</simpara>
<screen>{
for rpm in $(ls *rpm); do
  echo " ========= $rpm ==========="
  rpm -qip $rpm
done
} 2&gt; /dev/null | tee /tmp/pkg-descriptions | less</screen>
<note><simpara>See the relevant appendix for the complete <literal>pkg-descriptions</literal> file.</simpara></note>
<warning><simpara>Some of the components are specific, <emphasis>out-of-date</emphasis> versions of vendor packages;
others, <emphasis>uncertified</emphasis> replacements for certified drivers.</simpara></warning>
</listitem>
</orderedlist>
</listitem>
</orderedlist>
<simpara>Based on the above, the most interesting components <emphasis>on initial review</emphasis> seem to be:</simpara>
<itemizedlist>
<listitem>
<simpara>
<literal>cpqacuxe</literal>: HP Array Configuration Utility
</simpara>
<screen>Name        : cpqacuxe                     Relocations: (not relocatable)
Version     : 8.30                              Vendor: Hewlett-Packard Company
Release     : 5.0                           Build Date: Wed 08 Jul 2009 10:14:24 PM EDT
Install Date: (not installed)               Build Host: Prowl.americas.hpqcorp.net
Group       : Applications/System           Source RPM: cpqacuxe-8.30-5.0.src.rpm
Size        : 12284428                         License: See cpqacuxe.license
Signature   : (none)
Packager    : Hewlett-Packard Company
URL         : http://www.hp.com/linux
Summary     : HP Array Configuration Utility
Description :
The HP Array Configuration Utility is the web-based disk array
configuration program for Array Controllers.</screen>
</listitem>
<listitem>
<simpara>
<literal>hpacucli</literal>: HP Command Line Array Configuration Utility
</simpara>
<screen>Name        : hpacucli                     Relocations: (not relocatable)
Version     : 8.30                              Vendor: Hewlett-Packard Company
Release     : 5.0                           Build Date: Wed 08 Jul 2009 06:14:52 PM EDT
Install Date: (not installed)               Build Host: Prowl.americas.hpqcorp.net
Group       : Applications/System           Source RPM: hpacucli-8.30-5.0.src.rpm
Size        : 15748051                         License: See hpacucli.license
Signature   : (none)
Packager    : Hewlett-Packard Company
URL         : http://www.hp.com/linux
Summary     : HP Command Line Array Configuration Utility
Description :
The HP Command Line Array Configuration Utility is the disk
array configuration program for Array Controllers.</screen>
</listitem>
<listitem>
<simpara>
<literal>hpdiags</literal>: hp Insight Diagnostics
</simpara>
<screen>Name        : hpdiags                      Relocations: (not relocatable)
Version     : 8.3.0                             Vendor: (none)
Release     : 14                            Build Date: Mon 10 Aug 2009 04:53:48 PM EDT
Install Date: (not installed)               Build Host: linux-X64
Group       : Applications/System           Source RPM: hpdiags-8.3.0-14.src.rpm
Size        : 64303983                         License: commercial
Signature   : (none)
URL         : http://www.hp.com/linux
Summary     : hp Insight Diagnostics
Description :
Identifies and exercises system components.</screen>
</listitem>
<listitem>
<simpara>
<literal>hp-health</literal>: HP System Health Application and Command Line Utilities
</simpara>
<screen>Name        : hp-health                    Relocations: (not relocatable)
Version     : 8.3.1.2                           Vendor: Hewlett-Packard Company
Release     : 2                             Build Date: Thu 17 Sep 2009 03:21:17 PM EDT
Install Date: (not installed)               Build Host: bld72.sdg.adapps.hp.com
Group       : System Environment            Source RPM: hp-health-8.3.1.2-2.src.rpm
Size        : 1506986                          License: 2008 Hewlett-Packard Development Company, L.P.
Signature   : (none)
Packager    : Hewlett-Packard Company
URL         : http://www.hp.com/go/proliantlinux
Summary     : HP System Health Application and Command Line Utilities
Description :
This package contains the System Health Monitor for all hp Proliant systems
with ASM, ILO, &amp; ILO2 embedded management asics.  Also contained are the
command line utilities.</screen>
</listitem>
<listitem>
<simpara>
<literal>hp-ilo</literal>: HP iLO Channel Interface Driver
</simpara>
<screen>Name        : hp-ilo                       Relocations: (not relocatable)
Version     : 8.3.0                             Vendor: Hewlett-Packard Company
Release     : 118.rhel5                     Build Date: Fri 26 Jun 2009 01:10:10 PM EDT
Install Date: (not installed)               Build Host: rhel5ebuild
Group       : System Environment/Kernel     Source RPM: hp-ilo-8.3.0-118.rhel5.src.rpm
Size        : 1910611                          License: GNU Public License
Signature   : (none)
Packager    : Hewlett-Packard Company
URL         : http://www.hp.com/go/proliantlinux
Summary     : HP iLO Channel Interface Driver
Description :
This is the Hewlett-Packard integrated Lights-Out (iLO) system management
controller channel interface device driver. This driver establishes a channel
from the iLO 2 controller to an application such that the application can
communicate directly to the iLO 2 controller.</screen>
</listitem>
<listitem>
<simpara>
<literal>hponcfg</literal>: RILOE II/iLo online configuration utility
</simpara>
<screen>Name        : hponcfg                      Relocations: (not relocatable)
Version     : 2.2.0                             Vendor: Hewlett-Packard Company
Release     : 5                             Build Date: Tue 02 Jun 2009 11:35:56 PM EDT
Install Date: (not installed)               Build Host: nt179237.ind.hp.com
Group       : Utilities/System              Source RPM: hponcfg-2.2.0-5.src.rpm
Size        : 200492                           License: Proprietary
Signature   : (none)
Packager    : Hewlett-Packard Company
URL         : http://www.hp.com/go/ilo
Summary     : hponcfg - An RILOE II/iLo online configuration utility
Description :
Hponcfg is a command line utility that can be used to configure iLO/RILOE II from with in the operating system without requiring a reboot of the server.</screen>
</listitem>
<listitem>
<simpara>
<literal>hpsmh</literal>: HP System Management Homepage
</simpara>
<screen>Name        : hpsmh                        Relocations: (not relocatable)
Version     : 3.0.2                             Vendor: Hewlett-Packard Company
Release     : 77                            Build Date: Sat 20 Jun 2009 12:45:38 PM EDT
Install Date: (not installed)               Build Host: linux
Group       : Applications/System           Source RPM: hpsmh-3.0.2-77.src.rpm
Size        : 43065778                         License: COPYRIGHT 2004-2009 Hewlett-Packard Development Company, L.P.  All rights reserved.
Signature   : (none)
Packager    : Hewlett-Packard Company
URL         : http://www.hp.com/linux
Summary     : HP System Management Homepage
Description :
The HP System Management Homepage v3.0.2.77</screen>
</listitem>
<listitem>
<simpara>
<literal>hp-snmp-agents</literal>: Insight Management Agents(SNMP) for HP ProLiant Systems
</simpara>
<screen>Name        : hp-snmp-agents               Relocations: (not relocatable)
Version     : 8.3.0.27                          Vendor: Hewlett-Packard Company
Release     : 24                            Build Date: Tue 28 Jul 2009 12:52:56 PM EDT
Install Date: (not installed)               Build Host: bld73.sdg.adapps.hp.com
Group       : System Environment            Source RPM: hp-snmp-agents-8.3.0.27-24.src.rpm
Size        : 5428602                          License: 2008 Hewlett-Packard Development Company, L.P.
Signature   : (none)
Packager    : Hewlett-Packard Company
URL         : http://www.hp.com/go/proliantlinux
Summary     : Insight Management Agents(SNMP) for HP ProLiant Systems
Description :
This package contains the SNMP server, storage, and nic agents for all
hp Proliant systems with ASM, ILO, &amp; ILO2 embedded management asics.</screen>
</listitem>
</itemizedlist>
<note><simpara>The above components are binary-only and do not require building.</simpara></note>
<simpara>These additional components appear interesting, but possibly invasive:</simpara>
<itemizedlist>
<listitem>
<simpara>
<literal>fibreutils</literal>: Complimentary programs and scripts for HP supported FC HBAs
</simpara>
<screen>Name        : fibreutils                   Relocations: (not relocatable)
Version     : 2.5                               Vendor: Hewlett-Packard Company
Release     : 4                             Build Date: Tue 25 Nov 2008 11:42:36 AM EST
Install Date: (not installed)               Build Host: deimos.mro.cpqcorp.net
Group       : Applications/System           Source RPM: fibreutils-2.5-4.src.rpm
Size        : 161229                           License: Proprietary
Signature   : (none)
Packager    : Hewlett-Packard Company
URL         : http://www.hp.com
Summary     : Provides complimentary programs and scripts for HP supported FC HBAs
Description :
This RPM has the following components:

* Miscellaneous scripts and programs to compliment HP supported FC drivers:

lssd
lssg
adapter_info
probe-luns
hp_rescan
hp_system_info
scsi_info
sysfs_scandisk
sysfs_scan_rport</screen>
<note><simpara>This component may provide redundant functionality with standard tools
provided by <literal>sg3_utils</literal>, <literal>lspci</literal>, <literal>dmidecode</literal>, and other packages.</simpara></note>
</listitem>
</itemizedlist>
</section>
<section id="_test_installation_of_psp_components">
<title>Test installation of PSP components</title>
<simpara>This section describes how to test the installation
of interesting PSP components in an isolated environment
with no impact on other environments.</simpara>
<section id="_goals_of_test_installation">
<title>Goals of test installation</title>
<simpara>The goals of a test installation procedure:</simpara>
<itemizedlist>
<listitem>
<simpara>
Build in an isolated environment
</simpara>
</listitem>
<listitem>
<simpara>
Determine whether components are buildable
</simpara>
</listitem>
<listitem>
<simpara>
Determine build dependencies
</simpara>
</listitem>
<listitem>
<simpara>
Determine run-time dependencies
</simpara>
</listitem>
</itemizedlist>
</section>
<section id="_procedure_for_test_installation">
<title>Procedure for test installation</title>
<orderedlist numeration="arabic">
<listitem>
<simpara>
Copy the binary PSP packages to <literal>lunch18</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Attempt to install without yum
</simpara>
<screen>[pmorgan@lunch18 ~]$ sudo rpm -Uvh *rpm
error: Failed dependencies:
        libGLU.so.1()(64bit) is needed by hpdiags-8.3.0-14.x86_64
        libXaw.so.7()(64bit) is needed by hpdiags-8.3.0-14.x86_64
        libXmu.so.6()(64bit) is needed by hpdiags-8.3.0-14.x86_64
        libstdc++.so.5 is needed by hpdiags-8.3.0-14.x86_64
        libstdc++.so.5()(64bit) is needed by hpdiags-8.3.0-14.x86_64
        libstdc++.so.5(CXXABI_1.2) is needed by hpdiags-8.3.0-14.x86_64
        libstdc++.so.5(CXXABI_1.2)(64bit) is needed by hpdiags-8.3.0-14.x86_64
        libstdc++.so.5(GLIBCPP_3.2) is needed by hpdiags-8.3.0-14.x86_64
        libstdc++.so.5(GLIBCPP_3.2)(64bit) is needed by hpdiags-8.3.0-14.x86_64
        libstdc++.so.5(GLIBCPP_3.2.2)(64bit) is needed by hpdiags-8.3.0-14.x86_64
        libsensors.so.3()(64bit) is needed by hp-snmp-agents-8.3.0.27-24.x86_64
        net-snmp is needed by hp-snmp-agents-8.3.0.27-24.x86_64</screen>
</listitem>
<listitem>
<simpara>
Attempt to use <literal>yum</literal> to pick up dependencies
</simpara>
<screen>sudo yum localinstall --nogpgcheck *rpm</screen>
<simpara>Actual output</simpara>
<screen> --snip--
Installing for dependencies:
 compat-libstdc++-33
             i386   3.2.3-61         ise-rhel-5.3-x86_64                  232 k
 compat-libstdc++-33
             x86_64 3.2.3-61         ise-rhel-5.3-x86_64                  227 k
 libXaw      x86_64 1.0.2-8.1        ise-rhel-5.3-x86_64                  328 k
 libXmu      x86_64 1.0.2-5          ise-rhel-5.3-x86_64                   63 k
 libXpm      x86_64 3.5.5-3          ise-rhel-5.3-x86_64                   44 k
 lm_sensors  x86_64 2.10.7-4.el5     ise-rhel-5.3-x86_64                  528 k
 mesa-libGLU x86_64 6.5.1-7.7.el5    ise-rhel-5.3-x86_64                  226 k
 net-snmp    x86_64 1:5.3.2.2-5.el5  ise-rhel-5.3-x86_64                  716 k
 --snip--
Running Transaction
  Installing     : lm_sensors                                      [ 1/17]
  Installing     : libXmu                                          [ 2/17]
  Installing     : net-snmp                                        [ 3/17]
  Installing     : libXpm                                          [ 4/17]
  Installing     : libXaw                                          [ 5/17]
  Installing     : mesa-libGLU                                     [ 6/17]
  Installing     : compat-libstdc++-33                             [ 7/17]
Detected Red Hat Enterprise Linux AS/ES/WS/SERVER 5
Created hpsmh user and group...
  Installing     : hpsmh                                           [ 8/17]

**********************************************************
* System Management Homepage installed successfully with *
* default configuration values.   To change the default  *
* configuration values,  type the following command at   *
* the root prompt:                                       *
*                                                        *
* /opt/hp/hpsmh/sbin/smhconfig                           *
*                                                        *
**********************************************************


This RPM is not supported on RHEL 5.3 or greater

error: %pre(fibreutils-2.5-4.x86_64) scriptlet failed, exit status 1
error:   install: %pre scriptlet failed (2), skipping fibreutils-2.5-4
  Installing     : hp-ilo                                          [10/17]
Please read the Licence Agreement for this software at

         /opt/hp/hp-ilo/hp-ilo.license

By not removing this package, you are accepting the terms
of the included licenses.

The man page, hp-ilo(4), describes how to enable and use
the hp-ilo device driver.
  Installing     : hponcfg                                         [11/17]
  Installing     : compat-libstdc++-33                             [12/17]
  Installing     : cpqacuxe                                        [13/17]
  Installing     : hpacucli                                        [14/17]
  Installing     : hp-health                                       [15/17]
Please read the Licence Agreement for this software at

         /opt/hp/hp-health/hp-health.license

By not removing this package, you are accepting the terms
of the "HP Proliant Essentials Software End User License Agreement".
 ==============================================================================
 NOTE: In order to activate the software contained in this package, you must
      type '/etc/init.d/hp-health start' as 'root' user.
 ==============================================================================
The hp-health RPM has installed successfully.
  Installing     : hp-snmp-agents                                  [16/17]
Please read the Licence Agreement for this software at

         /opt/hp/hp-snmp-agents/hp-snmp-agents.license

By not removing this package, you are accepting the terms
of the "HP Proliant Essentials Software End User License Agreement".
Installing /opt/hp/hp-snmp-agents/nic/etc/HPcmanic.pp SELinux policy module
 ==============================================================================
 NOTE: In order to activate the software contained in this package, you must
      type '/sbin/hpsnmpconfig' as 'root' user.
      Once configuration is completed start the agents by typing
      /etc/init.d/hp-snmp-agents start
 ==============================================================================
  Installing     : hpdiags                                         [17/17]
Stopping hpsmhd: [  OK  ]
Starting hpsmhd: [  OK  ]

Installed: cpqacuxe.i386 0:8.30-5.0 fibreutils.x86_64 0:2.5-4 hp-health.x86_64 0:8.3.1.2-2 hp-ilo.x86_64 0:8.3.0-118.rhel5 hp-snmp-agents.x86_64 0:8.3.0.27-24 hpacucli.i386 0:8.30-5.0 hpdiags.x86_64 0:8.3.0-14 hponcfg.noarch 0:2.2.0-5 hpsmh.x86_64 0:3.0.2-77
Dependency Installed: compat-libstdc++-33.i386 0:3.2.3-61 compat-libstdc++-33.x86_64 0:3.2.3-61 libXaw.x86_64 0:1.0.2-8.1 libXmu.x86_64 0:1.0.2-5 libXpm.x86_64 0:3.5.5-3 lm_sensors.x86_64 0:2.10.7-4.el5 mesa-libGLU.x86_64 0:6.5.1-7.7.el5 net-snmp.x86_64 1:5.3.2.2-5.el5
Complete!
 --snip--</screen>
</listitem>
<listitem>
<simpara>
Check disk usage in <literal>/opt</literal>
</simpara>
<screen>[pmorgan@lunch18 ~]$ sudo du -lsh /opt
119M    /opt</screen>
</listitem>
</orderedlist>
</section>
<section id="_test_configuration">
<title>Test configuration</title>
<simpara>Dave Shouse provided configuration settings for the test installation.</simpara>
<formalpara><title>Equinix</title><para>SNMP trap destination is 6.3.5.202</para></formalpara>
<simpara>Telx
SNMP trap destination is 6.4.5.202</simpara>
<formalpara><title>Community strings for both environments</title><para>SNMP read only string:     0p7im15e
SNMP read/write string:    3p51lon!</para></formalpara>
</section>
</section>
<section id="_rpm_details">
<title>RPM Details</title>
<simpara>This section describes the major ingredients needed for
building the RPMs for deployment.</simpara>
</section>
</chapter>
