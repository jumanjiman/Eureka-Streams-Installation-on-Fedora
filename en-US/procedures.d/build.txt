
=== Build and run a development installation

These steps install numerous dependencies required
to build and run a development installation of Eureka Streams.
This procedure is based on the instructions at
http://www.eurekastreams.org/build-and-run/[].

include::install-prereqs.txt[]

include::install-maven.txt[]

include::eurekastreams-source.txt[]

include::maven-deps.txt[]


==== Compile and install source

These steps compile and install the Eureka Streams source code.

. Define some preferences

.. Create `/opt/eurekastreams/myprefs.sh`
+
----
dbserver=127.0.0.1
dbname=eurekastreams
dbuser=eruekastreams
export WEBPORT=80
export GRWEBPORT=8080
lucene_indexdir=/opt/lucene/index
lucene_sourcedir=/opt/lucene/source
cache="localhost:11211"
baseurl="http://$(hostname):$WEBPORT"
grbaseurl="http://$(hostname):$GRWEBPORT"
----

.. Check the file into Git
+
----
pushd /opt/eurekastreams
git add myprefs.sh
git commit -m 'save my preferences'
----

.. Source the above file and make directories
+
----
source /opt/eurekastreams/myprefs.sh
mkdir -p $lucene_indexdir
mkdir -p $lucene_sourcedir
----

. Compile the application and test suite
+
NOTE: Use `-DskipTests` to avoid creating the test suite.
+
----
. /opt/eurekastreams/myprefs.sh
mvn clean install -Dopenaccess-security        \
	-Dbuild.db.dbname=$dbname                  \
	-Dbuild.db.dbuser=$dbuser                  \
	-Dbuild.web.baseurl=$baseurl               \
	-Dbuild.web.grbaseurl=$grbaseurl           \
	-Dbuild.db.servername=$dbserver            \
	-Dbuild.lucene.indexdir=$lucene_indexdir   \
	-Dbuild.lucene.sourcedir=$lucene_sourcedir \
	-Dbuild.cache.servernames=$cache
----
+
When the above command completes, you should see output
such as:
+
----
stub output
----
