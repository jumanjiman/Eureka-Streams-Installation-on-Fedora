
include::variables.txt[]


Recommendations
---------------

This section of the engagement journal describes recommendations
for {client}.

=== Collect kernel crash information

We should configure most Linux boxes to collect kernel
crash information in the event of a system crash to
improve supportability.

==== Install kdump on non-Xen hosts

Kdump uses `kexec` to quickly boot to a dump-capture kernel whenever a
dump of the system kernel's memory needs to be taken (for example, when
the system panics). The system kernel's memory image is preserved across
the reboot and is accessible to the dump-capture kernel.

You can use common commands, such as `cp` and `scp`, to copy the
memory image to a dump file on the local disk, or across the network to
a remote system.

We should install and configure `kdump` on most bare-metal machines. 

. Decide whether to store crash dumps on local DASD or send across the network
  to a central crash dump server
. Run `yum -y install kdump system-config-kdump`
. Start a local X server on a workstation, then `ssh -X root@<hostname>`
. Run `system-config-kdump &` to configure

==== Install xendump on Xen hosts

The `xendump` utility is the Xen equivalent of `kdump`.


=== Disable _zeroconf_ networking

_Zeroconf_ networking adds an additional route to the kernel
to enable machines without an IP address to communicate on
the network. It was originally designed for home usage but
is generally unnecessary in an enterprise server environment.
{client} does not use _zeroconf_ networks, so we can
disable those unnecessary routes.

Run the following scriptlet in `%post` of a standard
kickstart or on existing servers.

----
file=/etc/sysconfig/network
grep -q NOZEROCONF $file || echo "NOZEROCONF=disabled" >> $file

service avahi-daemon status && service avahi-daemon stop
chkconfig avahi-daemon off
----


=== Use alternatives to switch between sendmail and postfix

It is my understanding that {client} prefers to use `postfix`
as the MSA on most servers. 

`alternatives` is a system of symlinks used to allow multiple,
conflicting versions of a command or other file to exist on
a single machine concurrently. Using `alternatives` to switch
between the active flavor of a package avoids unpredictable 
side effects resulting from mixed symlinks.

If `sendmail` is already installed on a machine, 
follow these steps to switch to `postfix`:

. Install postfix with `yum -y install postfix`
. Run `service sendmail stop`
. Run `alternatives --config mta` and choose `postfix`. This establishes 
  symlinks for key binaries as well as the `postfix` documentation 
. Configure and enable `postfix`

It is probably better to avoid installing `sendmail` during kickstart.
Add these two lines to the `%packages` section of the kickstart:

----
postfix
-sendmail
----


=== Audit logs

ISE audit has recommended centralized logging for servers.

==== Centralized logging

We should consider making *rsyslog* a part of the ISE baseline
build. A centralized log host can be virtualized and addressed
using a DNS CNAME, such as *syslog01*. This would allow
the virtual host to be relocated as needed without impacting
existing configurations.

****
Rsyslog is an enhanced multi-threaded syslogd supporting, among
others, MySQL, syslog/tcp, RFC 3195, permitted sender lists,
filtering on any message part, and fine grain output format
control. It is quite compatible to stock sysklogd and can be used
as a drop-in replacement. Its advanced features make it suitable
for enterprise-class, encryption protected syslog relay chains
while at the same time being very easy to setup for the novice
user.
****

==== Event correlation

ISE should consider 
installing *Simple Event Correlator* (*SEC*) on the `syslog` host.

See http://simple-evcorr.sourceforge.net for more information on *SEC*.

****
SEC is an open source and platform independent event correlation tool
that was designed to fill the gap between commercial event correlation
systems and homegrown solutions that usually comprise a few simple
shell scripts. SEC accepts input from regular files, named pipes,
and standard input, and can thus be employed as an event correlator
for any application that is able to write its output events to a
file stream. The SEC configuration is stored in text files as rules,
each rule specifying an event matching condition, an action list,
and optionally a Boolean expression whose truth value decides whether
the rule can be applied at a given moment. Regular expressions, Perl
subroutines, etc. are used for defining event matching conditions. SEC
can produce output events by executing user-specified shell scripts
or programs (e.g., snmptrap or mail), by writing messages to pipes
or files, and by various other means.

SEC has been successfully applied in various domains like network
management, system monitoring, data security, intrusion detection,
log file monitoring and analysis, etc. The applications SEC has
been used or integrated with include HP OpenView NNM and Operations,
CiscoWorks, BMC Patrol, Nagios, SNMPTT, Snort IDS, Prelude IDS, etc.
****


=== Bash Scripting

ISE admins should develop Bash scripting skills. 
I spent some time with the Linux team to cover scripting
and command-line navigation.  Using scripts to
automate management tasks provides useful benefits:

* Understand how system scripts operate
* Resolve run-time issues with servers
* Ability to test scripts before running in production
* Avoids risk of entering commands by hand on production servers
* Reproduce tasks efficiently
* Over time, build a library of common scripts

The following two resources are freely available online
and provide a great reference for individuals who prefer
to self-study.

Introductory tutorial on Bash scripting::
	http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html

Advanced Bash scripting guide (PDF)::
	http://freshmeat.net/projects/advancedbashscriptingguide

For instructor-led training with labs, Red Hat offers a course
that includes Bash scripting and Linux command-line skills.
RH033 _Red Hat Linux Essentials for Windows 
Professionals and other Operating System Users_ is available in 
a traditional corporate classroom environment or as a virtual
Internet-based class. 

Red Hat classroom course RH033::
	https://www.redhat.com/courses/rh033_red_hat_linux_essentials

Red Hat virtual course  RH033VT::
	https://www.redhat.com/elearning/rh033vt_red_hat_linux_essentials/



=== Red Hat Support

To engage Red Hat support, Client should use the procedure
detailed in the relevant appendix of this document.


// vim: set syntax=asciidoc:
// vim: set ts=4:

